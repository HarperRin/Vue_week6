"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[228],{1530:function(t,i,e){function o(t){return{all:t=t||new Map,on:function(i,e){var o=t.get(i);o?o.push(e):t.set(i,[e])},off:function(i,e){var o=t.get(i);o&&(e?o.splice(o.indexOf(e)>>>0,1):t.set(i,[]))},emit:function(i,e){var o=t.get(i);o&&o.slice().map((function(t){t(e)})),(o=t.get("*"))&&o.slice().map((function(t){t(i,e)}))}}}e.d(i,{Z:function(){return d}});const a=o();var d=a},1228:function(t,i,e){e.r(i),e.d(i,{default:function(){return J}});var o=e(6252),a=e(3577),d=e(9963);const s={class:"container mt-5 mb-5"},l=(0,o._)("h2",{class:"text-center"},"產品列表頁面",-1),n={class:"table align-middle mt-5"},r=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"圖片"),(0,o._)("th",null,"商品名稱"),(0,o._)("th",null,"價格"),(0,o._)("th")])],-1),c={style:{width:"200px"}},u={key:0,class:"h5"},p={key:1,class:"h6"},h={key:2,class:"h5"},g={class:"btn-group btn-group-sm"},m=["onClick","disabled"],b={class:"fas fa-spinner fa-pulse"},_=(0,o.Uk)(" 查看更多 "),v=["onClick","disabled"],w={class:"fas fa-spinner fa-pulse"},f=(0,o.Uk)(" 加到購物車 ");function k(t,i,e,k,y,L){const x=(0,o.up)("VLoading"),C=(0,o.up)("UserProductModal");return(0,o.wg)(),(0,o.iD)("div",s,[l,(0,o.Wm)(x,{active:y.isLoading},null,8,["active"]),(0,o._)("table",n,[r,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",c,[(0,o._)("div",{style:(0,a.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",null,[t.price?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",u,(0,a.zw)(t.origin_price)+" 元 ",1)),t.price?((0,o.wg)(),(0,o.iD)("del",p,"原價 "+(0,a.zw)(t.origin_price)+" 元",1)):(0,o.kq)("",!0),t.price?((0,o.wg)(),(0,o.iD)("div",h," 現在只要 "+(0,a.zw)(t.price)+" 元 ",1)):(0,o.kq)("",!0)]),(0,o._)("td",null,[(0,o._)("div",g,[(0,o._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:i=>L.getProduct(t.id),disabled:y.isLoadingItem===t.id||!t.is_enabled},[(0,o.wy)((0,o._)("i",b,null,512),[[d.F8,y.isLoadingItem===t.id]]),_],8,m),(0,o._)("button",{type:"button",class:"btn btn-outline-danger",onClick:i=>L.addToCart(t.id),disabled:y.isLoadingItem===t.id||!t.is_enabled},[(0,o.wy)((0,o._)("i",w,null,512),[[d.F8,y.isLoadingItem===t.id]]),f],8,v)])])])))),128))])]),(0,o.Wm)(C,{ref:"userProductModal",product:y.product,onAddToCart:L.addToCart},null,8,["product","onAddToCart"])])}var y=e(1530);const L={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},x={class:"modal-dialog modal-xl",role:"document"},C={class:"modal-content border-0"},M={class:"modal-header bg-dark text-white"},z={class:"modal-title",id:"exampleModalLabel"},q=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),P={class:"modal-body"},D={class:"row"},I={class:"col-sm-6"},$=["src"],U={class:"col-sm-6"},T={class:"badge bg-primary rounded-pill"},Z={key:0,class:"h5"},V={key:1,class:"h6"},A={key:2,class:"h5"},F={class:"input-group"};function W(t,i,e,s,l,n){return(0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("div",x,[(0,o._)("div",C,[(0,o._)("div",M,[(0,o._)("h5",z,[(0,o._)("span",null,(0,a.zw)(e.product.title),1)]),q]),(0,o._)("div",P,[(0,o._)("div",D,[(0,o._)("div",I,[(0,o._)("img",{class:"img-fluid",src:e.product.imageUrl,alt:""},null,8,$)]),(0,o._)("div",U,[(0,o._)("span",T,(0,a.zw)(e.product.category),1),(0,o._)("p",null,"商品描述："+(0,a.zw)(e.product.description),1),(0,o._)("p",null,"商品內容："+(0,a.zw)(e.product.content),1),e.product.price?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Z,(0,a.zw)(e.product.origin_price)+" 元 ",1)),e.product.price?((0,o.wg)(),(0,o.iD)("del",V,"原價 "+(0,a.zw)(e.product.origin_price)+" 元",1)):(0,o.kq)("",!0),e.product.price?((0,o.wg)(),(0,o.iD)("div",A," 現在只要 "+(0,a.zw)(e.product.price)+" 元 ",1)):(0,o.kq)("",!0),(0,o._)("div",null,[(0,o._)("div",F,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control","onUpdate:modelValue":i[0]||(i[0]=t=>l.qty=t),min:"1"},null,512),[[d.nr,l.qty,void 0,{number:!0}]]),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:i[1]||(i[1]=i=>t.$emit("add-to-cart",e.product.id,l.qty))}," 加入購物車 ")])])])])])])])],512)}var j=e(7424),H=e.n(j),K={props:["product"],data(){return{modal:{},qty:1}},watch:{id(){const{id:t}=this.$route.params;this.getProduct(t)}},mounted(){this.modal=new(H())(this.$refs.modal)},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}}},O=e(3744);const Y=(0,O.Z)(K,[["render",W]]);var B=Y,E={name:"ProductsView",data(){return{products:[],isLoadingItem:"",isLoading:!1,product:{}}},components:{UserProductModal:B},mounted(){this.getProducts()},methods:{addToCart(t,i=1){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/cart",o={product_id:t,qty:i};this.isLoadingItem=t,this.$refs.userProductModal.hideModal(),this.$http.post(e,{data:o}).then((t=>{alert(t.data.message),this.isLoadingItem="",this.isLoading=!1,y.Z.emit("cart-length")})).catch((t=>{alert(t.data.message)}))},getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/products";this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{alert(t.data.message)}))},getProduct(t){this.isLoading=!0;const i=`https://vue3-course-api.hexschool.io/v2/api/hlin-hexschool/product/${t}`;this.isLoadingItem=t,this.$http.get(i).then((t=>{this.isLoadingItem="",this.product=t.data.product,this.isLoading=!1,this.$refs.userProductModal.openModal()})).catch((t=>{alert(t.data.message)}))}}};const G=(0,O.Z)(E,[["render",k]]);var J=G}}]);
//# sourceMappingURL=228.7582c88d.js.map