{"version":3,"file":"js/228.7582c88d.js","mappings":"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","sources":["webpack://vue_week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue_week6/./src/libs/emitter.js","webpack://vue_week6/./src/views/ProductsView.vue","webpack://vue_week6/./src/components/UserProductModal.vue","webpack://vue_week6/./src/components/UserProductModal.vue?c1cf","webpack://vue_week6/./src/views/ProductsView.vue?91db"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from \"mitt\";\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <div class=\"container mt-5 mb-5\">\n    <h2 class=\"text-center\">產品列表頁面</h2>\n    <VLoading :active=\"isLoading\"></VLoading>\n    <table class=\"table align-middle mt-5\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.id\">\n          <td style=\"width: 200px\">\n            <div\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n              :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n            ></div>\n          </td>\n          <td>\n            {{ product.title }}\n          </td>\n          <td>\n            <div class=\"h5\" v-if=\"!product.price\">\n              {{ product.origin_price }} 元\n            </div>\n            <del class=\"h6\" v-if=\"product.price\"\n              >原價 {{ product.origin_price }} 元</del\n            >\n            <div class=\"h5\" v-if=\"product.price\">\n              現在只要 {{ product.price }} 元\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"getProduct(product.id)\"\n                :disabled=\"isLoadingItem === product.id || !product.is_enabled\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(product.id)\"\n                :disabled=\"isLoadingItem === product.id || !product.is_enabled\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <UserProductModal\n      ref=\"userProductModal\"\n      :product=\"product\"\n      @add-to-cart=\"addToCart\"\n    ></UserProductModal>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libs/emitter.js\";\nimport UserProductModal from \"@/components/UserProductModal.vue\";\n\nexport default {\n  name: \"ProductsView\",\n  data() {\n    return {\n      products: [],\n      isLoadingItem: \"\",\n      isLoading: false,\n      product: {},\n    };\n  },\n  components: {\n    UserProductModal,\n  },\n  mounted() {\n    this.getProducts();\n  },\n  methods: {\n    addToCart(id, qty = 1) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cartData = {\n        product_id: id,\n        qty,\n      };\n      this.isLoadingItem = id;\n      this.$refs.userProductModal.hideModal();\n      this.$http\n        .post(api, { data: cartData })\n        .then((res) => {\n          alert(res.data.message);\n          this.isLoadingItem = \"\";\n          this.isLoading = false;\n          emitter.emit(\"cart-length\");\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n    getProducts() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.products = res.data.products;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n    getProduct(id) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.isLoadingItem = id;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.isLoadingItem = \"\";\n          this.product = res.data.product;\n          this.isLoading = false;\n          this.$refs.userProductModal.openModal();\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"productModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>{{ product.title }}</span>\n          </h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-6\">\n              <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\" />\n            </div>\n            <div class=\"col-sm-6\">\n              <span class=\"badge bg-primary rounded-pill\">{{\n                product.category\n              }}</span>\n              <p>商品描述：{{ product.description }}</p>\n              <p>商品內容：{{ product.content }}</p>\n              <div class=\"h5\" v-if=\"!product.price\">\n                {{ product.origin_price }} 元\n              </div>\n              <del class=\"h6\" v-if=\"product.price\"\n                >原價 {{ product.origin_price }} 元</del\n              >\n              <div class=\"h5\" v-if=\"product.price\">\n                現在只要 {{ product.price }} 元\n              </div>\n              <div>\n                <div class=\"input-group\">\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    v-model.number=\"qty\"\n                    min=\"1\"\n                  />\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-primary\"\n                    @click=\"$emit('add-to-cart', product.id, qty)\"\n                  >\n                    加入購物車\n                  </button>\n                </div>\n              </div>\n            </div>\n            <!-- col-sm-6 end -->\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from \"bootstrap/js/dist/modal\";\nexport default {\n  props: [\"product\"],\n  data() {\n    return {\n      modal: {},\n      qty: 1,\n    };\n  },\n  watch: {\n    id() {\n      const { id } = this.$route.params;\n      this.getProduct(id);\n    },\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal);\n  },\n  methods: {\n    openModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n  },\n};\n</script>\n","import { render } from \"./UserProductModal.vue?vue&type=template&id=5b79dce5\"\nimport script from \"./UserProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Downloads/Vue projects/vue_week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ProductsView.vue?vue&type=template&id=0c614e6c\"\nimport script from \"./ProductsView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Downloads/Vue projects/vue_week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","style","_createElementBlock","_hoisted_2","_createVNode","_component_VLoading","active","$data","_hoisted_4","_Fragment","_renderList","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","type","onClick","$options","disabled","is_enabled","_component_UserProductModal","ref","onAddToCart","tabindex","role","$props","_hoisted_6","src","alt","category","description","content","$event","min","_ctx","props","data","modal","qty","watch","this","$route","params","getProduct","mounted","Modal","$refs","methods","openModal","show","hideModal","hide","__exports__","name","products","isLoadingItem","isLoading","components","UserProductModal","getProducts","addToCart","api","cartData","product_id","userProductModal","$http","post","then","res","alert","message","catch","err","render"],"sourceRoot":""}